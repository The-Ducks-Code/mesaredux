!function(){var e=document.getElementById("fullscreen-wrapper"),t=document.getElementById("game-iframe"),n=document.getElementById("fullscreen-btn");if(e&&t&&n){var r="html";if(document.body&&void 0!==document.body.dataset)if(document.body.dataset.type&&""!==document.body.dataset.type.trim())r=document.body.dataset.type.trim().toLowerCase();else if(document.body.dataset.flash){var l=document.body.dataset.flash;("true"===l||"True"===l||"1"===l)&&(r="flash")}var o="flash"===r,s="dos"===r,u=!(!t.style||!t.style.border||""===t.style.border.trim()),f=u?t.style.border:"",i=!1;document.addEventListener("fullscreenchange",c),document.addEventListener("webkitfullscreenchange",c),document.addEventListener("mozfullscreenchange",c),document.addEventListener("MSFullscreenChange",c),window.addEventListener("resize",c),n.addEventListener("click",(function(){if(o)d()||(console.warn("Ruffle fullscreen unavailable, falling back to browser fullscreen."),a()&&setTimeout(c,50));else if(s){!function(){if(!s||!t||!t.contentWindow)return!1;try{var e=t.contentWindow;if("function"==typeof e.requestDosFullscreen)return!0===e.requestDosFullscreen();var n=e.dosInstance||e.__dosInstance;if(n&&"function"==typeof n.setFullScreen)return n.setFullScreen(!0),!0}catch(e){console.error("Failed to invoke DOS fullscreen method.",e)}return!1}()&&a()&&setTimeout(c,50)}else a()&&setTimeout(c,50)}))}function c(){if(e&&t){var n,r=parseInt(t.getAttribute("width"),10)||t.offsetWidth,l=parseInt(t.getAttribute("height"),10)||t.offsetHeight,o=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,s=o===e,c=!1;if(o&&(o===e||o===t||e.contains(o))&&(c=!0),n=c,t&&(n&&!i?(t.style.border="none",i=!0):!n&&i&&(u?t.style.border=f:t.style&&t.style.removeProperty("border"),i=!1)),s&&r&&l){t.style.width=r+"px",t.style.height=l+"px";var a=(e.clientHeight||window.innerHeight)/l;t.style.position="absolute",t.style.top="0",t.style.left="50%",t.style.transformOrigin="50% 0%",t.style.transform="translateX(-50%) scale("+a+")"}else t.style.position="",t.style.top="",t.style.left="",t.style.width="",t.style.height="",t.style.transformOrigin="",t.style.transform=""}}function a(){if(e.requestFullscreen)e.requestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}function d(){var e=function(){if(!t.contentDocument)return null;var e=t.contentDocument,n=e.querySelector("ruffle-player");if(n)return n;var r=e.querySelector("ruffle-embed");if(r){if("function"==typeof r.enterFullscreen||"function"==typeof r.enter_fullscreen)return r;if(r.ruffle)return r.ruffle;if(r.shadowRoot){var l=r.shadowRoot.querySelector("ruffle-player");if(l)return l}}if(t.contentWindow&&t.contentWindow.RufflePlayer){var o=t.contentWindow.RufflePlayer;if("function"==typeof o.newest){var s=o.newest();if(s)return s}if(Array.isArray(o.players)&&o.players.length>0)return o.players[0];if(o.player&&"function"==typeof o.player.enterFullscreen)return o.player}return null}();if(!e)return!1;var n=e;if(e.shadowRoot){var r=e.shadowRoot.querySelector("ruffle-player");r&&(n=r)}var l=[n.enterFullscreen,n.enter_fullscreen,n.requestFullscreen];l[0]&&"function"==typeof l[0]||!e.ruffle||(l.unshift(e.ruffle.enterFullscreen),n=e.ruffle);for(var o=0;o<l.length;o++)if("function"==typeof l[o])try{return l[o].call(n),!0}catch(e){console.error("Failed to invoke Ruffle fullscreen method.",e)}return!1}}();
